/*!
 * @packet main;
 * @require touch;
 * @require media;
 */
Module({name:"boards",extend:"viewgroup",init:function(){this.dom.show();var b=this.dom.children().length;this.size=b;this.current=0;this.dom.height(b*100+"%");this.dom.children().each(function(){$(this).height(100/b+"%")});var a=this;this.position=0;$("body").touch(function(d){if(d.action==="down"){a.dom.transition().removeAll();a.position=a.dom.transform().y()}else{if(d.action==="move"){var c=a.position+d.offsetY,f=0;if(c>0||c<-(a.size-1)*$("body").height()){f=a.position+d.offsetY/3}else{f=c}a.dom.transform().y(f)}else{console.log(d.offsetY);if(Math.abs(d.offsetY)>10){if(d.direction==="top"){a.nextBoard()}else{if(d.direction==="bottom"){a.prevBoard()}else{a.gotoBoard(-1)}}}}}d.preventDefault();d.stopPropagation()});this.gotoBoard(0)},gotoBoard:function(a){if(a>=0&&a<this.size){this.current=a;this.dom.transition().set("-all-transform").scope().transform().y(-a*$(".content").height());this.dom.children().each(function(){if($(this).hasClass("active")){$(this).removeClass("active")}}).eq(a).addClass("active")}else{this.dom.transition().set("-all-transform").scope().transform().y(-this.current*$(".content").height())}return this},nextBoard:function(){this.gotoBoard(this.current+1);return this},prevBoard:function(){this.gotoBoard(this.current-1);return this}});Module({name:"music",extend:"view",option:{music:"music/angel.mp3"},init:function(d){var c=this;this.dom.hide();var b=require("media");this.audio=b.audio({onloadedmetadata:function(){c.audio.play();c.dom.show()}}).src(d.music).loop(true);this.dom.children(0).button(function(){if(!c.audio.isPlaying()){c.dom.removeClass("pause");c.audio.play()}else{c.dom.addClass("pause");c.audio.pause()}})}});