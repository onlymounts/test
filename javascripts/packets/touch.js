/*!
 * @packet touch;
 */
var currentTime=function(){return new Date().getTime()};var eventAgent={events:(function(){if((/AppleWebKit.*Mobile.*/).test(window.navigator.userAgent)){return{type:"mobile",down:"touchstart",move:"touchmove",up:"touchend"}}else{return{type:"pc",down:"mousedown",move:"mousemove",up:"mouseup"}}})(),onmove:function(a){this.dom.bind(eventAgent.events.move,eventAgent._move);return this},ondown:function(a){this.dom.bind(eventAgent.events.down,eventAgent._down);return this},onup:function(a){this.dom.bind(eventAgent.events.up,eventAgent._up);return this},type:function(){return eventAgent.events.type},_down:function(b){var a=b.currentTarget.datasets._touch_;b.action="down";a.direction="none";b.direction=a.direction;a.isdown=true;a.ismove=false;a.movefirst=true;a.itime=currentTime();a.xis=b.touches?b.touches[0].pageX:b.pageX;a.yis=b.touches?b.touches[0].pageY:b.pageY;a.cxis=a.xis;a.cyis=a.yis;b.xis=a.xis;b.yis=a.yis;a._x=a.xis;a._y=a.yis;a._ontouch.call(a.dom,b)},_move:function(c){var a=c.currentTarget.datasets._touch_;if(a.isdown){c.action="move";a.ismove=true;a.cxis=c.touches?c.touches[0].pageX:c.pageX;a.cyis=c.touches?c.touches[0].pageY:c.pageY;c.xis=a.cxis;c.yis=a.cyis;c.offsetX=a.cxis-a.xis;c.offsetY=a.cyis-a.yis;if(a.movefirst){a.movefirst=false;if(Math.abs(c.offsetX)>Math.abs(c.offsetY)){a.oishv="h"}else{a.oishv="v"}if(a.oishv==="h"){if(a.cxis>a.xis){a.odirection="right"}else{a.odirection="left"}}else{if(a.cyis>a.yis){a.odirection="bottom"}else{a.odirection="top"}}}var d=a.cxis-a._x;var b=a.cyis-a._y;if(Math.abs(d)>Math.abs(b)){a.ishv="h"}else{a.ishv="v"}if(a.ishv==="h"){if(a.cxis>a._x){a.direction="right"}else{a.direction="left"}}else{if(a.cyis>a._y){a.direction="bottom"}else{a.direction="top"}}c.direction=a.direction;c.odirection=a.odirection;a._x=a.cxis;a._y=a.cyis;a._ontouch.call(a.dom,c)}},_up:function(b){var a=b.currentTarget.datasets._touch_;if(a.isdown){b.action="up";a.isdown=false;b.timeLast=new Date().getTime()-a.itime;b.offsetY=a.cyis-a.yis;b.offsetX=a.cxis-a.xis;b.ismove=a.ismove;b.xis=a.cxis;b.yis=a.cyis;b.direction=a.direction;b.odirection=a.odirection;a._ontouch.call(a.dom,b);a.ismove=false}}};$.fn.touch=function(c){if(!this.data("_touch_")){var b=new agent(this,c);this.data("_touch_",b);return b}else{return this.data("_touch_")}};var agent=function(b,a){this.dom=b;this._ontouch=a;this.xis=0;this.yis=0;this.cxis=0;this.cyis=0;this.direction="";this.isdown=false;this.ismove=false;this.itime=0;this.movefirst=false;this.ishv="h";this.dom.css({"-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});eventAgent.ondown.call(this);eventAgent.onmove.call(this);eventAgent.onup.call(this);return this};agent.prototype.ontouch=function(a){this._ontouch=a;return this};$.fn.button=function(b){var a=this;this.css("position","relative");this.touch(function(c){if(c.action==="up"){if(!c.ismove&&c.timeLast>30){var d=$("<div class='nnbtn'></div>").appendTo(a);setTimeout(function(){d.transition().set("opacity").done(function(){this.remove();b&&b.call(a)}).scope().toggleClass("hover")},0)}}})};$.fn.touchAsbutton=function(d){var c={hoverClass:"hover",onclick:null};$.extend(c,d);var a=true,e=null,b=false;this.touch(function(h){if(h.action==="down"){var f=this;a=true;b=false;e=setTimeout(function(){if(a){f.addClass(c.hoverClass)}},100)}else{if(h.action==="move"){a=false;b=true;this.removeClass(c.hoverClass)}else{var f=this,g=null;g=setTimeout(function(){f.removeClass(c.hoverClass);clearTimeout(e);if(!b){if(c.onclick){c.onclick.call(f,h)}clearTimeout(g)}},150)}}h.preventDefault()});return this};$.fn.swipeLeft=function(a){this.touch(function(b){if(b.action==="up"){this.find("span").html(b.direction);if(b.timeLast<200&&b.direction==="left"){if(a){a.call(this)}}}b.preventDefault()});return this};$.fn.swipeRight=function(a){this.touch(function(b){if(b.action==="up"){this.find("span").html(b.direction);if(b.timeLast<200&&b.direction==="right"){if(a){a.call(this)}}}b.preventDefault()});return this};$.fn.swipeTop=function(){this.touch(function(a){if(a.action==="up"){if(a.timeLast<200&&a.direction==="top"){if(fn){fn.call(this)}}}a.preventDefault()});return this};$.fn.swipeBottom=function(){this.touch(function(a){if(a.action==="up"){if(a.timeLast<200&&a.direction==="bottom"){if(fn){fn.call(this)}}}a.preventDefault()});return this};$.fn.tap=function(a){this.touch(function(b){if(b.action==="up"){if(!b.ismove&&b.timeLast<200){if(a){a.call(this,b)}}}b.preventDefault()});return this};$.fn.longTap=function(a){this.touch(function(b){if(b.action==="up"){if(!b.ismove&&b.timeLast>=1000){if(a){a.call(this,b)}}}b.preventDefault()});return this};$.fn.doubleTap=function(a){var b=0;this.touch(function(c){if(c.action==="down"){}else{if(c.action==="up"){if(!c.ismove&&c.timeLast<200){b++;if(b===2){if(a){a.call(this)}b=0}}}}c.preventDefault()});return this};